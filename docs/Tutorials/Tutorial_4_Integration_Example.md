# Tutorial 4: Integration Example

In this tutorial, we will export the simulation data to **OpenVDB** files, which can be loaded into tools like Blender, Houdini, or Maya for rendering.

## Step 1: Configure Output

The `SimulationEngine` provides an API to write the current state of a field to disk.

```lua
-- Inside your simulation loop
for i = 1, 100 do
    engine:step() -- Run one step of all registered passes
    
    -- Export every 10 frames
    if i % 10 == 0 then
        local filename = string.format("output/density_%04d.vdb", i)
        engine:write_vdb("density", filename)
        print("Exported " .. filename)
    end
end
```

## Step 2: Visualization in Blender

1. Open Blender.
2. Press `Shift+A` -> Volume -> Import OpenVDB.
3. Select the sequence of `.vdb` files generated by FluidLoom.
4. Add a Volume Material (Principled Volume).
5. Set "Density" attribute to "density".
6. Render!

## Automation

You can wrap this logic in a Lua function:

```lua
function run_and_export(steps, interval)
    for t = 1, steps do
        engine:step()
        if t % interval == 0 then
            engine:write_vdb("density", "sim_data/frame_" .. t .. ".vdb")
        end
    end
end
```
